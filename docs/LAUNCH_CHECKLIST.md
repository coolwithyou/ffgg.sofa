# SOFA 런칭 체크리스트

## 1. 환경 설정

### 1.1 환경변수 (Vercel)
- [ ] `DATABASE_URL` - Neon PostgreSQL 연결
- [ ] `SESSION_SECRET` - 32자 이상 랜덤 문자열
- [ ] `GOOGLE_GENERATIVE_AI_API_KEY` - Gemini API 키
- [ ] `OPENAI_API_KEY` - OpenAI API 키 (폴백용)
- [ ] `UPSTASH_REDIS_REST_URL` - Rate Limiting용 Redis
- [ ] `UPSTASH_REDIS_REST_TOKEN` - Upstash 토큰
- [ ] `RESEND_API_KEY` - 이메일 알림용 (선택)
- [ ] `NEXT_PUBLIC_APP_URL` - 프로덕션 URL

### 1.2 도메인 설정
- [ ] 커스텀 도메인 연결 (Vercel)
- [ ] SSL 인증서 확인 (자동)
- [ ] www → apex 리다이렉트 설정

---

## 2. 데이터베이스

### 2.1 스키마 마이그레이션
- [ ] `pnpm db:migrate` 실행
- [ ] 인덱스 생성 확인 (chunks_embedding, chunks_fts)
- [ ] RLS 정책 활성화 확인

### 2.2 초기 데이터
- [ ] 관리자 계정 생성 (internal_operator)
- [ ] 테스트 테넌트 생성 및 확인

---

## 3. 기능 테스트

### 3.1 인증
- [ ] 회원가입 플로우
- [ ] 로그인 / 로그아웃
- [ ] 세션 타임아웃 (30분)
- [ ] 계정 잠금 (5회 실패)

### 3.2 문서 관리
- [ ] 파일 업로드 (PDF, DOCX, CSV)
- [ ] 문서 처리 상태 표시
- [ ] 청크 생성 및 임베딩

### 3.3 챗봇
- [ ] 웹 챗봇 응답 테스트
- [ ] 스트리밍 응답 확인
- [ ] 에러 시 폴백 동작

### 3.4 위젯
- [ ] iframe 임베드 테스트
- [ ] CORS 설정 확인
- [ ] 모바일 반응형

### 3.5 카카오 연동
- [ ] 오픈빌더 스킬 서버 응답
- [ ] 4초 타임아웃 처리
- [ ] 응답 포맷 (300자 제한)

---

## 4. 보안 점검

### 4.1 인증/권한
- [ ] 세션 암호화 (iron-session)
- [ ] RLS 테넌트 격리 확인
- [ ] API Rate Limiting 동작

### 4.2 입력 검증
- [ ] UUID 파라미터 검증
- [ ] 파일 타입/크기 제한
- [ ] XSS 방지 (입력 이스케이프)

### 4.3 보안 헤더
- [ ] CSP (Content-Security-Policy)
- [ ] X-Frame-Options
- [ ] X-Content-Type-Options
- [ ] HSTS

---

## 5. 성능

### 5.1 응답 시간
- [ ] 웹 챗봇: p95 < 3초
- [ ] 카카오 API: p95 < 4초
- [ ] 페이지 로드: < 2초

### 5.2 최적화
- [ ] Next.js 빌드 최적화
- [ ] 이미지 최적화
- [ ] 코드 스플리팅

---

## 6. 모니터링

### 6.1 로깅
- [ ] 에러 로깅 설정
- [ ] 접속 기록 로깅 (F36 컴플라이언스)

### 6.2 알림
- [ ] 에러 알림 설정 (Vercel/Sentry)
- [ ] 사용량 임계치 알림

---

## 7. 문서 준비

### 7.1 사용자 가이드
- [ ] 시작 가이드
- [ ] 문서 업로드 가이드
- [ ] 카카오 연동 가이드
- [ ] 위젯 설치 가이드

### 7.2 법률 문서
- [ ] 개인정보처리방침
- [ ] 이용약관
- [ ] OpenAI DPA 확인

---

## 8. 런칭 후 체크

### 8.1 모니터링 (D+1)
- [ ] 에러율 확인
- [ ] 응답 시간 확인
- [ ] 사용량 확인

### 8.2 피드백 수집
- [ ] 베타 테스터 피드백
- [ ] 버그 리포트 대응
- [ ] 기능 요청 정리

---

## 담당자 연락처

| 역할 | 담당 | 연락처 |
|------|------|--------|
| 개발 리드 | - | - |
| 인프라 | - | - |
| 고객 지원 | - | - |

---

## 롤백 계획

1. Vercel에서 이전 배포로 즉시 롤백
2. 데이터베이스 변경 시: 마이그레이션 롤백 스크립트 준비
3. 긴급 연락망 확보

---

*마지막 업데이트: 2024-12-24*
