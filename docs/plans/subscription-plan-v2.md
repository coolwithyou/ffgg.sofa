# SOFA κµ¬λ… ν”λ V2 μ„¤κ³„ λ¬Έμ„

> **λ¬Έμ„ λ²„μ „**: 1.0
> **μ‘μ„±μΌ**: 2025-01-05
> **μƒνƒ**: μ„¤κ³„ μ™„λ£, κµ¬ν„ λ€κΈ°

---

## λ©μ°¨

1. [κ°μ”](#κ°μ”)
2. [ν”λ κµ¬μ΅°](#ν”λ-κµ¬μ΅°)
3. [ν¬μΈνΈ μ‹μ¤ν…](#ν¬μΈνΈ-μ‹μ¤ν…)
4. [μƒμ μ„¤κ³„](#μƒμ-μ„¤κ³„)
5. [λ°μ΄ν„° λ¨λΈ](#λ°μ΄ν„°-λ¨λΈ)
6. [κµ¬ν„ κ°€μ΄λ“](#κµ¬ν„-κ°€μ΄λ“)
7. [λ§μ΄κ·Έλ μ΄μ…](#λ§μ΄κ·Έλ μ΄μ…)

---

## κ°μ”

### λ°°κ²½

κΈ°μ΅΄ κµ¬λ… ν”λ(Basic/Standard/Premium)μ„ μƒλ΅μ΄ κµ¬μ΅°(Free/Pro/Business)λ΅ κ°νΈν•κ³ , ν¬μΈνΈ κΈ°λ° κ³ΌκΈ μ‹μ¤ν…μ„ λ„μ…ν•©λ‹λ‹¤.

### ν•µμ‹¬ λ³€κ²½μ‚¬ν•­

| ν•­λ© | κΈ°μ΅΄ | λ³€κ²½ |
|------|------|------|
| ν”λ μ΄λ¦„ | Basic/Standard/Premium | Free/Pro/Business |
| κ³ΌκΈ λ°©μ‹ | μ›”κ°„ λ€ν™” μ μ ν• | ν¬μΈνΈ κΈ°λ° (1P = 1 AI μ‘λ‹µ) |
| λ¬΄λ£ ν”λ | κΈ°λ¥ μ ν• | λ¨λ“  κΈ°λ¥ μ²΄ν—, λ°°ν¬λ§ μ ν• |
| λ°°ν¬ | Boolean ν”λκ·Έ | ν‹°μ–΄λ³„ κ°μ μ ν• |

---

## ν”λ κµ¬μ΅°

### ν”λλ³„ μƒμ„Έ μ¤ν™

#### Free (λ¬΄λ£)

| ν•­λ© | κ°’ | λΉ„κ³  |
|------|-----|------|
| **μ›” κ°€κ²©** | β‚©0 | - |
| **μ—° κ°€κ²©** | β‚©0 | - |
| **μ²΄ν— ν¬μΈνΈ** | 500P | 1νμ„±, κ°€μ… μ‹ μ§€κΈ‰ |
| **μ›” ν¬μΈνΈ** | 0P | μ¶”κ°€ κµ¬λ§¤λ§ κ°€λ¥ |
| **μ±—λ΄‡** | 3κ° | - |
| **λ°μ΄ν„°μ…‹** | 3κ° | μ±—λ΄‡λ‹Ή 1κ° (1:1) |
| **λ¬Έμ„/μ±—λ΄‡** | 10κ° | - |
| **μ΄ λ¬Έμ„** | 30κ° | 3 μ±—λ΄‡ Γ— 10 λ¬Έμ„ |
| **μ €μ¥κ³µκ°„** | 100MB | - |
| **λ²„μ „ μ΄λ ¥** | 1κ° | - |
| **λ°°ν¬** | 0κ° | λ―Έλ¦¬λ³΄κΈ°λ§ κ°€λ¥ |
| **API μ•΅μ„Έμ¤** | β | - |
| **μ»¤μ¤ν…€ λ„λ©”μΈ** | β | - |
| **μ§€μ›** | μ»¤λ®¤λ‹ν‹° | - |

#### Pro (μ›” β‚©50,000)

| ν•­λ© | κ°’ | λΉ„κ³  |
|------|-----|------|
| **μ›” κ°€κ²©** | β‚©50,000 | - |
| **μ—° κ°€κ²©** | β‚©500,000 | 17% ν• μΈ |
| **μ›” ν¬μΈνΈ** | 3,000P | AI μ‘λ‹µ ~300ν |
| **μ±—λ΄‡** | 3κ° | - |
| **λ°μ΄ν„°μ…‹** | 3κ° | μ±—λ΄‡λ‹Ή 1κ° (1:1) |
| **λ¬Έμ„/μ±—λ΄‡** | 33κ° | - |
| **μ΄ λ¬Έμ„** | 100κ° | - |
| **μ €μ¥κ³µκ°„** | 1GB | - |
| **λ²„μ „ μ΄λ ¥** | 10κ° | - |
| **λ°°ν¬** | 1κ° | - |
| **API μ•΅μ„Έμ¤** | β | - |
| **μ»¤μ¤ν…€ λ„λ©”μΈ** | β | - |
| **μ§€μ›** | μ΄λ©”μΌ | - |

#### Business (μ›” β‚©150,000)

| ν•­λ© | κ°’ | λΉ„κ³  |
|------|-----|------|
| **μ›” κ°€κ²©** | β‚©150,000 | - |
| **μ—° κ°€κ²©** | β‚©1,500,000 | 17% ν• μΈ |
| **μ›” ν¬μΈνΈ** | 10,000P | AI μ‘λ‹µ ~1,000ν |
| **μ±—λ΄‡** | 10κ° | - |
| **λ°μ΄ν„°μ…‹** | 10κ° | μ±—λ΄‡λ‹Ή 1κ° (1:1) |
| **λ¬Έμ„/μ±—λ΄‡** | 50κ° | - |
| **μ΄ λ¬Έμ„** | 500κ° | - |
| **μ €μ¥κ³µκ°„** | 10GB | - |
| **λ²„μ „ μ΄λ ¥** | 30κ° | - |
| **λ°°ν¬** | 3κ° | - |
| **API μ•΅μ„Έμ¤** | β… | - |
| **μ»¤μ¤ν…€ λ„λ©”μΈ** | β… | - |
| **μ§€μ›** | μ¬λ™/μΉ΄ν†΅ μ°μ„  μ‘λ€ | - |

### ν”λ λΉ„κµν‘

| κΈ°λ¥ | Free | Pro | Business |
|------|------|-----|----------|
| **κ°€κ²©** | β‚©0 | β‚©50,000/μ›” | β‚©150,000/μ›” |
| **ν¬μΈνΈ** | 500P (1ν) | 3,000P/μ›” | 10,000P/μ›” |
| **μ±—λ΄‡** | 3 | 3 | 10 |
| **μ΄ λ¬Έμ„** | 30 | 100 | 500 |
| **μ €μ¥κ³µκ°„** | 100MB | 1GB | 10GB |
| **λ²„μ „ μ΄λ ¥** | 1 | 10 | 30 |
| **λ°°ν¬** | β | 1κ° | 3κ° |
| **μ»¤μ¤ν…€ λ„λ©”μΈ** | β | β | β… |
| **API μ•΅μ„Έμ¤** | β | β | β… |

---

## ν¬μΈνΈ μ‹μ¤ν…

### κ°μ”

- **1P = 1 AI μ‘λ‹µ** (GPT/Claude λ“± λ¨λΈ νΈμ¶ 1ν)
- ν¬μΈνΈλ” μ›”μ΄μ— μλ™ μ¶©μ „ (κµ¬λ… ν”λ)
- μ”μ—¬ ν¬μΈνΈλ” μµμ›” μ΄μ›”λμ§€ μ•μ
- μ¶”κ°€ ν¬μΈνΈλ” λ³„λ„ κµ¬λ§¤ κ°€λ¥

### μ¶”κ°€ ν¬μΈνΈ ν¨ν‚¤μ§€

| ν¨ν‚¤μ§€ | ν¬μΈνΈ | κ°€κ²© | λ‹¨κ°€ | ν• μΈμ¨ |
|--------|--------|------|------|--------|
| κΈ°λ³Έ | 5,000P | β‚©30,000 | 6μ›/P | - |
| λ€μ©λ‰ | 10,000P | β‚©50,000 | 5μ›/P | 17% |

### ν¬μΈνΈ μ‚¬μ© μ •μ±…

```
ν¬μΈνΈ μ°¨κ° μ‹μ : AI μ‘λ‹µ μƒμ„± μ™„λ£ ν›„
ν¬μΈνΈ λ¶€μ΅± μ‹: 402 Payment Required μ‘λ‹µ
    β†’ "ν¬μΈνΈκ°€ λ¶€μ΅±ν•©λ‹λ‹¤. ν¬μΈνΈλ¥Ό μ¶©μ „ν•΄μ£Όμ„Έμ”."
    β†’ μ¶©μ „ νμ΄μ§€λ΅ μ λ„
```

### μ²΄ν— ν¬μΈνΈ μ •μ±…

- **μ§€κΈ‰ μ‹μ **: μ‹ κ· κ°€μ… μ‹ 1ν
- **μ ν¨ κΈ°κ°„**: λ¬΄μ ν• (μ‚¬μ© μ „κΉμ§€)
- **μ¬μ§€κΈ‰**: λ¶κ°€ (κ³„μ •λ‹Ή 1ν)
- **μ©λ„**: λ¨λ“  AI κΈ°λ¥ μ²΄ν—

---

## μƒμ μ„¤κ³„

λ¨λ“  μμΉλ” μƒμλ΅ κ΄€λ¦¬ν•μ—¬ μ‰½κ² μ΅°μ  κ°€λ¥ν•©λ‹λ‹¤.

### νμΌ μ„μΉ

```
lib/
β”β”€β”€ tier/
β”‚   β”β”€β”€ constants.ts      # ν‹°μ–΄λ³„ μ ν• μƒμ
β”‚   β””β”€β”€ types.ts          # νƒ€μ… μ •μ
β”β”€β”€ points/
β”‚   β””β”€β”€ constants.ts      # ν¬μΈνΈ κ΄€λ ¨ μƒμ
β””β”€β”€ billing/
    β””β”€β”€ constants.ts      # κ°€κ²© κ΄€λ ¨ μƒμ
```

### ν‹°μ–΄ μ ν• μƒμ (`lib/tier/constants.ts`)

```typescript
/**
 * ν‹°μ–΄λ³„ μ ν• μƒμ μ •μ
 *
 * μμΉ μ΅°μ • μ‹ μ΄ νμΌλ§ μμ •ν•λ©΄ λ©λ‹λ‹¤.
 */
export const TIER_LIMITS = {
  free: {
    // λ¦¬μ†μ¤ μ ν•
    maxChatbots: 3,
    maxDatasets: 3,                    // = maxChatbots (1:1)
    maxDocumentsPerDataset: 10,
    maxTotalDocuments: 30,             // 3 Γ— 10
    maxStorageBytes: 100 * 1024 * 1024, // 100MB
    maxChunksPerDocument: 100,

    // λ²„μ „ κ΄€λ¦¬
    maxPublishHistory: 1,

    // λ°°ν¬ μ ν•
    maxDeployments: 0,
    canDeploy: false,

    // ν¬μΈνΈ
    monthlyPoints: 0,

    // API Rate Limiting
    apiRequestsPerMinute: 60,
    chatRequestsPerDay: 100,
    uploadRequestsPerHour: 10,
  },

  pro: {
    maxChatbots: 3,
    maxDatasets: 3,
    maxDocumentsPerDataset: 33,
    maxTotalDocuments: 100,
    maxStorageBytes: 1024 * 1024 * 1024, // 1GB
    maxChunksPerDocument: 500,

    maxPublishHistory: 10,

    maxDeployments: 1,
    canDeploy: true,

    monthlyPoints: 3000,

    apiRequestsPerMinute: 300,
    chatRequestsPerDay: 1000,
    uploadRequestsPerHour: 50,
  },

  business: {
    maxChatbots: 10,
    maxDatasets: 10,
    maxDocumentsPerDataset: 50,
    maxTotalDocuments: 500,
    maxStorageBytes: 10 * 1024 * 1024 * 1024, // 10GB
    maxChunksPerDocument: 1000,

    maxPublishHistory: 30,

    maxDeployments: 3,
    canDeploy: true,

    monthlyPoints: 10000,

    apiRequestsPerMinute: 1000,
    chatRequestsPerDay: 10000,
    uploadRequestsPerHour: 200,
  },
} as const;

/**
 * ν‹°μ–΄λ³„ κΈ°λ¥ ν™μ„±ν™”
 */
export const TIER_FEATURES = {
  free: {
    customDomain: false,
    apiAccess: false,
    prioritySupport: false,
    advancedAnalytics: false,
  },
  pro: {
    customDomain: false,
    apiAccess: false,
    prioritySupport: false,
    advancedAnalytics: true,
  },
  business: {
    customDomain: true,
    apiAccess: true,
    prioritySupport: true,
    advancedAnalytics: true,
  },
} as const;

export type Tier = 'free' | 'pro' | 'business';
```

### κ°€κ²© μƒμ (`lib/billing/constants.ts`)

```typescript
/**
 * ν”λ κ°€κ²© μ •λ³΄
 *
 * κ°€κ²© λ³€κ²½ μ‹ μ΄ νμΌλ§ μμ •ν•λ©΄ λ©λ‹λ‹¤.
 */
export const PLAN_PRICING = {
  free: {
    monthlyPrice: 0,
    yearlyPrice: 0,
    yearlyDiscount: 0,
  },
  pro: {
    monthlyPrice: 50000,          // β‚©50,000
    yearlyPrice: 500000,          // β‚©500,000 (17% ν• μΈ)
    yearlyDiscount: 0.17,
  },
  business: {
    monthlyPrice: 150000,         // β‚©150,000
    yearlyPrice: 1500000,         // β‚©1,500,000 (17% ν• μΈ)
    yearlyDiscount: 0.17,
  },
} as const;

/**
 * μ¶”κ°€ ν¬μΈνΈ ν¨ν‚¤μ§€
 */
export const POINT_PACKAGES = {
  points_5000: {
    id: 'points_5000',
    name: '5,000 ν¬μΈνΈ',
    points: 5000,
    price: 30000,                 // β‚©30,000
    pricePerPoint: 6,
    discount: 0,
  },
  points_10000: {
    id: 'points_10000',
    name: '10,000 ν¬μΈνΈ',
    points: 10000,
    price: 50000,                 // β‚©50,000
    pricePerPoint: 5,
    discount: 0.17,               // 17% ν• μΈ
  },
} as const;
```

### ν¬μΈνΈ μƒμ (`lib/points/constants.ts`)

```typescript
/**
 * ν¬μΈνΈ μ‹μ¤ν… μƒμ
 */
export const POINTS = {
  // μ²΄ν— ν¬μΈνΈ
  FREE_TRIAL_POINTS: 500,

  // AI μ‘λ‹µλ‹Ή ν¬μΈνΈ μ†λΉ„
  POINTS_PER_RESPONSE: 1,

  // μµμ† μ”μ•΅ κ²½κ³  μ„κ³„κ°’
  LOW_BALANCE_THRESHOLD: 100,

  // ν¬μΈνΈ λ§λ£ (κµ¬λ… ν¬μΈνΈλ” μ›”λ§ λ§λ£, κµ¬λ§¤ ν¬μΈνΈλ” λ¬΄μ ν•)
  SUBSCRIPTION_POINTS_EXPIRE: true,
  PURCHASED_POINTS_EXPIRE: false,
} as const;
```

---

## λ°μ΄ν„° λ¨λΈ

### μƒλ΅ μ¶”κ°€λλ” ν…μ΄λΈ”

#### tenant_points (ν¬μΈνΈ μ”μ•΅)

```sql
CREATE TABLE tenant_points (
  tenant_id UUID PRIMARY KEY REFERENCES tenants(id),
  balance INTEGER NOT NULL DEFAULT 0,
  free_points_used BOOLEAN DEFAULT FALSE,
  last_recharged_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

#### point_transactions (ν¬μΈνΈ μ΄λ ¥)

```sql
CREATE TABLE point_transactions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  tenant_id UUID REFERENCES tenants(id),
  type VARCHAR(20) NOT NULL,  -- 'charge', 'use', 'refund', 'expire'
  amount INTEGER NOT NULL,     -- μ–‘μ: μ¶©μ „, μμ: μ‚¬μ©
  balance INTEGER NOT NULL,    -- νΈλμ­μ… ν›„ μ”μ•΅
  description TEXT,
  metadata JSONB,
  created_at TIMESTAMP DEFAULT NOW()
);

-- μΈλ±μ¤
CREATE INDEX idx_point_transactions_tenant ON point_transactions(tenant_id);
CREATE INDEX idx_point_transactions_created ON point_transactions(created_at);
```

#### point_packages (ν¬μΈνΈ ν¨ν‚¤μ§€)

```sql
CREATE TABLE point_packages (
  id VARCHAR(50) PRIMARY KEY,
  name VARCHAR(100) NOT NULL,
  points INTEGER NOT NULL,
  price INTEGER NOT NULL,
  is_active BOOLEAN DEFAULT TRUE,
  sort_order INTEGER DEFAULT 0
);
```

### κΈ°μ΅΄ ν…μ΄λΈ” μμ •

#### plans ν…μ΄λΈ”

```typescript
// limits ν•„λ“μ— μ¶”κ°€
limits: {
  // κΈ°μ΅΄ ν•„λ“...
  maxDeployments: number;      // π†• λ°°ν¬ κ°μ μ ν•
  monthlyPoints: number;       // π†• μ›”κ°„ ν¬μΈνΈ
}

// features ν•„λ“μ— μ¶”κ°€
features: {
  // κΈ°μ΅΄ ν•„λ“...
  customDomain: boolean;       // π†• μ»¤μ¤ν…€ λ„λ©”μΈ
  apiAccess: boolean;          // π†• API μ•΅μ„Έμ¤
  canDeploy: boolean;          // π†• λ°°ν¬ κ°€λ¥ μ—¬λ¶€
}
```

---

## κµ¬ν„ κ°€μ΄λ“

### Phase 1: λ°μ΄ν„° λ¨λΈ (2-3μ‹κ°„)

1. `drizzle/schema.ts`μ— μƒ ν…μ΄λΈ” μ¶”κ°€
2. `drizzle/seed/plans.ts` ν”λ λ°μ΄ν„° μ—…λ°μ΄νΈ
3. `drizzle/seed/point-packages.ts` μ‹λ“ νμΌ μƒμ„±
4. λ§μ΄κ·Έλ μ΄μ… μ‹¤ν–‰

### Phase 2: ν¬μΈνΈ μ‹μ¤ν… (3-4μ‹κ°„)

1. `lib/points/` λ””λ ‰ν† λ¦¬ μƒμ„±
2. ν¬μΈνΈ μ„λΉ„μ¤ κµ¬ν„ (`service.ts`)
3. ν¬μΈνΈ κ²€μ¦ ν•¨μ κµ¬ν„ (`validator.ts`)
4. AI μ‘λ‹µ μ‹ ν¬μΈνΈ μ°¨κ° λ΅μ§ μ¶”κ°€

### Phase 3: λ°°ν¬ μ ν• (1-2μ‹κ°„)

1. `lib/tier/constants.ts` μ—…λ°μ΄νΈ
2. `lib/tier/validator.ts`μ— `canDeploy()` ν•¨μ μ¶”κ°€
3. λ°°ν¬ APIμ— κ²€μ¦ λ΅μ§ μ μ©

### Phase 4: API λΌμ°νΈ (2-3μ‹κ°„)

1. `GET /api/points` - μ”μ•΅ μ΅°ν
2. `GET /api/points/packages` - ν¨ν‚¤μ§€ λ©λ΅
3. `POST /api/points/purchase` - ν¬μΈνΈ κµ¬λ§¤
4. μ›Ήν›… ν•Έλ“¤λ¬μ— ν¬μΈνΈ μ¶©μ „ λ΅μ§ μ¶”κ°€

### Phase 5: ν”„λ΅ νΈμ—”λ“ (4-5μ‹κ°„)

1. **μ‚¬μ΄λ“λ°” ν¬μΈνΈ ν„ν™© μ„μ ―** (NavPointsStatus μ»΄ν¬λ„νΈ)
2. κµ¬λ… νμ΄μ§€ ν¬μΈνΈ μ”μ•΅ ν‘μ‹
3. ν”λ μ„ νƒ νμ΄μ§€ UI μ—…λ°μ΄νΈ
4. ν¬μΈνΈ κµ¬λ§¤ νμ΄μ§€ μ‹ κ· μƒμ„±
5. λ°°ν¬ μ ν• μ•λ‚΄ λ¨λ‹¬

#### 5.1 μ‚¬μ΄λ“λ°” ν¬μΈνΈ ν„ν™© μ„μ ―

**μ„μΉ**: `SidebarFooter` λ‚΄, `NavUser` μ„
**νμΌ**: `app/(console)/console/components/nav/app-sidebar.tsx`

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ ...λ©”λ‰΄...              β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ π’ 1,234 P              β”‚  β† μ”μ—¬ ν¬μΈνΈ
β”‚ β–β–β–β–β–β–β–β–β–‘β–‘ 41% μ‚¬μ©     β”‚  β† ν”„λ΅κ·Έλ μ¤ λ°”
β”‚ μ΄λ² λ‹¬ 500P μ‚¬μ©       β”‚  β† μ‚¬μ©λ‰ ν…μ¤νΈ
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ [π‘¤] μ‚¬μ©μλ…      β–Ύ   β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

**λ™μ‘**:
- ν΄λ¦­ μ‹ ν¬μΈνΈ μ¶©μ „ νμ΄μ§€λ΅ μ΄λ™ (`/console/account/subscription/points`)
- ν¬μΈνΈ λ¶€μ΅± μ‹ (100P μ΄ν•) κ²½κ³  μ¤νƒ€μΌ μ μ© (λΉ¨κ°„μƒ‰)
- μ‚¬μ΄λ“λ°” μ¶•μ† μ‹ μ•„μ΄μ½λ§ ν‘μ‹ (π’)

**μ»΄ν¬λ„νΈ κµ¬μ΅°**:
```typescript
function NavPointsStatus() {
  const { balance, used, total } = usePointsStatus(); // μ‹ κ· ν›…
  const usagePercent = total > 0 ? (used / total) * 100 : 0;
  const isLow = balance <= 100;

  return (
    <Link href="/console/account/subscription/points">
      <div className="px-3 py-2 rounded-lg hover:bg-sidebar-accent">
        <div className="flex items-center justify-between">
          <span className="text-sm font-medium">
            π’ {balance.toLocaleString()} P
          </span>
          {isLow && <Badge variant="destructive">λ¶€μ΅±</Badge>}
        </div>
        <Progress value={usagePercent} className="h-1.5 mt-1" />
        <span className="text-xs text-muted-foreground">
          μ΄λ² λ‹¬ {used.toLocaleString()}P μ‚¬μ©
        </span>
      </div>
    </Link>
  );
}
```

### Phase 6: Cron μ‘μ—… (1-2μ‹κ°„)

1. μ›”κ°„ ν¬μΈνΈ μλ™ μ¶©μ „ ν¬λ΅ 
2. μ²΄ν— ν¬μΈνΈ μ§€κΈ‰ λ΅μ§ (νμ›κ°€μ… μ‹)

---

## λ§μ΄κ·Έλ μ΄μ…

### ν”λ λ§¤ν•‘

| κΈ°μ΅΄ | μ‹ κ· | μ²λ¦¬ |
|------|------|------|
| Basic | Free | μλ™ μ „ν™ |
| Standard | Pro | μλ™ μ „ν™ + ν¬μΈνΈ μ§€κΈ‰ |
| Premium | Business | μλ™ μ „ν™ + ν¬μΈνΈ μ§€κΈ‰ |

### κΈ°μ΅΄ μ‚¬μ©μ ν¬μΈνΈ μ§€κΈ‰

```sql
-- κΈ°μ΅΄ κµ¬λ… μ‚¬μ©μμ—κ² μ”μ—¬ κΈ°κ°„ λΉ„λ΅€ ν¬μΈνΈ μ§€κΈ‰
-- (μ: Pro ν”λ, λ‚¨μ€ κΈ°κ°„ 15μΌ β†’ 3000 Γ— 15/30 = 1500P)
```

### λ΅¤λ°± κ³„ν

λ¬Έμ  λ°μƒ μ‹ κΈ°μ΅΄ ν”λμΌλ΅ λ³µκµ¬ κ°€λ¥ν•λ„λ΅:
1. κΈ°μ΅΄ ν”λ λ°μ΄ν„° λ°±μ—…
2. κΈ°λ¥ ν”λκ·Έλ΅ μ‹ κ· μ‹μ¤ν… on/off
3. ν¬μΈνΈ ν…μ΄λΈ”μ€ λ³„λ„ κ΄€λ¦¬ (κΈ°μ΅΄ λ΅μ§ μν–¥ μ—†μ)

---

## λ¶€λ΅: μƒμ λ³€κ²½ μμ‹

### κ°€κ²© λ³€κ²½

```typescript
// lib/billing/constants.ts
export const PLAN_PRICING = {
  pro: {
    monthlyPrice: 50000,    // β† μ΄ κ°’λ§ λ³€κ²½
    yearlyPrice: 500000,
    yearlyDiscount: 0.17,
  },
  // ...
};
```

### ν¬μΈνΈ μλ‰ λ³€κ²½

```typescript
// lib/tier/constants.ts
export const TIER_LIMITS = {
  pro: {
    monthlyPoints: 3000,    // β† μ΄ κ°’λ§ λ³€κ²½
    // ...
  },
  // ...
};
```

### λ°°ν¬ κ°μ λ³€κ²½

```typescript
// lib/tier/constants.ts
export const TIER_LIMITS = {
  business: {
    maxDeployments: 3,      // β† μ΄ κ°’λ§ λ³€κ²½
    // ...
  },
  // ...
};
```

---

## μ²΄ν¬λ¦¬μ¤νΈ

### κΈ°λ¥ κ²€μ¦

- [ ] Free μ‚¬μ©μ λ°°ν¬ μ‹λ„ β†’ μ—…κ·Έλ μ΄λ“ μ λ„ λ¨λ‹¬
- [ ] Pro μ‚¬μ©μ 2λ²μ§Έ λ°°ν¬ β†’ μ ν• μ•λ‚΄
- [ ] AI μ‘λ‹µ μ‹ 1P μ°¨κ°
- [ ] ν¬μΈνΈ 0 μ‹ 402 μ—λ¬ + μ•λ‚΄
- [ ] μ¶”κ°€ ν¬μΈνΈ κµ¬λ§¤ ν›„ μ¦‰μ‹ λ°μ
- [ ] μ›”κ°„ ν¬μΈνΈ μλ™ μ¶©μ „
- [ ] μ²΄ν— ν¬μΈνΈ 1νμ„± μ§€κΈ‰

### λ³΄μ•

- [ ] ν¬μΈνΈ μ΅°μ‘ λ°©μ§€ (μ„λ²„μ‚¬μ΄λ“ κ²€μ¦)
- [ ] κ²°μ  μ›Ήν›… μ„λ… κ²€μ¦
- [ ] Rate limiting μ μ©

### UX

- [ ] ν¬μΈνΈ λ¶€μ΅± μ‚¬μ „ κ²½κ³  (100P μ΄ν•)
- [ ] μ‚¬μ©λ‰ λ€μ‹λ³΄λ“
- [ ] ν”λ λΉ„κµν‘
